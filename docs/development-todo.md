# マーチャントテイル 開発TODOリスト

## フェーズ0: アートアセット制作（Week 1-8）

### キャラクターデザイン
- [ ] 主人公デザイン
  - [ ] 立ち絵（表情差分5種類）
  - [ ] 店内での動作スプライト
  - [ ] アイコン画像
- [ ] NPCデザイン
  - [ ] ギルド受付アンナ（立ち絵・表情差分）
  - [ ] 仕入れ業者3名のデザイン
  - [ ] 常連客5名のデザイン
  - [ ] その他町人10名
- [ ] AI商人デザイン（6種類の個性的な商人）

### 背景アート
- [ ] 店内背景
  - [ ] 基本の店内（朝・昼・夜の3パターン）
  - [ ] 店舗レベル別背景（4段階）
- [ ] 王都エルムの風景
  - [ ] 商店街
  - [ ] 市場
  - [ ] ギルド
  - [ ] 銀行
  - [ ] 広場
- [ ] 季節別背景バリエーション（春夏秋冬）
- [ ] イベント用特別背景
  - [ ] 収穫祭
  - [ ] ドラゴン討伐後の祝祭

### アイテムアート
- [ ] 商品アイコン
  - [ ] くだもの（10種類）
  - [ ] ポーション（8種類）
  - [ ] 武器（15種類）
  - [ ] アクセサリー（12種類）
  - [ ] 魔法書（8種類）
  - [ ] 宝石（6種類）
- [ ] アイテムの状態表示
  - [ ] 新鮮/腐敗状態
  - [ ] レア度表示エフェクト

### UI/UXデザイン
- [ ] UIスキン作成
  - [ ] ウィンドウフレーム
  - [ ] ボタンデザイン（通常/ホバー/押下）
  - [ ] アイコンセット（100種類以上）
- [ ] メニューデザイン
  - [ ] メインメニュー
  - [ ] 設定画面
  - [ ] セーブ/ロード画面
- [ ] HUDデザイン
  - [ ] 所持金表示
  - [ ] 時間/日付表示
  - [ ] ステータスバー
- [ ] 商人手帳のデザイン
  - [ ] ページテクスチャ
  - [ ] グラフスタイル
  - [ ] 装飾要素

### 音楽制作
- [ ] BGM制作
  - [ ] タイトル画面BGM
  - [ ] 店内BGM（朝・昼・夜）
  - [ ] 市場BGM
  - [ ] イベントBGM（祝祭/緊急）
  - [ ] 季節別BGM（4曲）
  - [ ] ランクアップファンファーレ
  - [ ] エンディングBGM
- [ ] ジングル
  - [ ] 売買成功
  - [ ] レベルアップ
  - [ ] 実績解除
  - [ ] 日付変更

### 効果音制作
- [ ] システムSE
  - [ ] 決定音
  - [ ] キャンセル音
  - [ ] カーソル移動音
  - [ ] ウィンドウ開閉音
- [ ] ゲームプレイSE
  - [ ] 商品購入音
  - [ ] 商品販売音
  - [ ] お金の音（チャリン）
  - [ ] 在庫移動音
  - [ ] 腐敗音
- [ ] 環境音
  - [ ] 町の喧騒
  - [ ] 店内の環境音
  - [ ] 季節の環境音（鳥の声、風の音など）

### アニメーション
- [ ] キャラクターアニメーション
  - [ ] 主人公の基本動作
  - [ ] NPCの待機モーション
  - [ ] 感情表現アニメーション
- [ ] UIアニメーション
  - [ ] 画面遷移エフェクト
  - [ ] ポップアップアニメーション
  - [ ] 数値変動アニメーション
- [ ] エフェクトアニメーション
  - [ ] 売買成功エフェクト
  - [ ] レベルアップエフェクト
  - [ ] 季節変化エフェクト

### ビジュアルエフェクト
- [ ] パーティクルエフェクト
  - [ ] 金貨獲得エフェクト
  - [ ] アイテム獲得エフェクト
  - [ ] 魔法エフェクト
- [ ] 天候エフェクト
  - [ ] 雨
  - [ ] 雪
  - [ ] 桜吹雪（春）
  - [ ] 落ち葉（秋）
- [ ] ライティング設定
  - [ ] 時間帯別ライティング
  - [ ] 室内ライティング
  - [ ] イベント用特殊ライティング

### ストーリー・テキスト
- [ ] メインストーリー執筆
  - [ ] オープニング
  - [ ] 各ランクアップ時のストーリー
  - [ ] エンディング（複数パターン）
- [ ] NPCダイアログ
  - [ ] チュートリアルテキスト
  - [ ] 日常会話（100パターン以上）
  - [ ] イベント会話
  - [ ] ヒント・アドバイステキスト
- [ ] アイテム説明文
  - [ ] 全アイテムの説明文
  - [ ] フレーバーテキスト
- [ ] システムメッセージ
  - [ ] チュートリアルメッセージ
  - [ ] エラーメッセージ
  - [ ] 確認メッセージ

### ブランディング素材
- [ ] ロゴデザイン
  - [ ] ゲームタイトルロゴ
  - [ ] サブタイトルロゴ
- [ ] キービジュアル
  - [ ] メインビジュアル
  - [ ] Steam用カプセルアート
  - [ ] ヘッダー画像
- [ ] プロモーション素材
  - [ ] スクリーンショット用構図
  - [ ] トレーラー用絵コンテ
  - [ ] SNS用画像テンプレート

## フェーズ1: 基盤構築（Week 1-4）✅ 完了

### 環境セットアップ
- [x] Godot 4.4.1のインストールと設定
- [x] Go 1.24の開発環境構築
- [x] GDExtension開発環境のセットアップ
- [x] Protocol Buffersのインストールと設定
- [x] プロジェクト構造の作成
- [x] GitHubリポジトリのセットアップ
- [x] CI/CD環境の構築（GitHub Actions）

### 基本アーキテクチャ実装 ✅ 完了
- [x] Clean Architectureのレイヤー構造実装
- [x] ドメインモデルの基本定義（itemドメイン完了）
- [x] イベントバスシステムの実装 ✅ 2025-08-07完了
  - [x] EventBusコア実装（Pub/Sub パターン）
  - [x] ドメインイベント定義（8種類）
  - [x] グローバルイベントバス（スレッドセーフ）
  - [x] マーケットイベントアダプター
  - [x] 非同期パブリッシング対応
- [x] GDExtensionバインディングの基礎実装 ✅ 2025-08-07完了
  - [x] merchant_game_library_initエントリポイント
  - [x] 初期化レベル管理（Core/Servers/Scene/Editor）
  - [x] クラスレジストリシステム
  - [x] メソッドバインディング機構
- [x] Godot-Go間の通信インターフェース構築 ✅ 2025-08-07完了
  - [x] C共有ライブラリビルド成功（.dylib/.so/.dll）
  - [x] MerchantGame、MarketManagerクラス登録

## フェーズ2: コアシステム実装（Week 5-12）

### ゲームループ ✅ 実装完了 2025-08-07
- [x] GameLoopインターフェースの実装
  - [x] 60FPS対応のメインループ
  - [x] デルタタイム管理
  - [x] 一時停止/再開機能
  - [x] ゲーム速度調整（0.1x〜10x）
- [x] TimeManagerの実装
  - [x] ゲーム内カレンダー（年/季節/日）
  - [x] 4つの季節（春夏秋冬）各30日
  - [x] リアルタイムとゲーム時間の同期
  - [x] 季節変化コールバック
- [x] GameStateの管理システム ✅ 2025-08-07完了
  - [x] ゲーム状態遷移管理（Menu/Playing/Paused/Saving/GameOver）
  - [x] プレイヤーランクシステム（Apprentice〜Master）
  - [x] ゴールド管理と取引追跡
  - [x] 評判システム（-100〜100）
  - [x] 店舗/倉庫容量管理
  - [x] 勝利/敗北条件判定
  - [x] セーブ/ロードデータ構造
- [x] フェーズ管理（朝・昼・夜）の実装
  - [x] 4つの時間帯（Morning/Noon/Evening/Night）
  - [x] フェーズ変更通知システム
  - [x] カスタマイズ可能な時間配分

### ECSシステム
- [ ] Entity管理システムの実装
- [ ] Component基本型の定義
- [ ] System基本クラスの実装
- [ ] World管理システムの構築

### アイテムシステム ✅ 基本実装完了
- [x] ItemMasterデータ構造の実装
- [x] 6種類のアイテムカテゴリ定義
  - [x] くだもの（腐敗システム付き）
  - [x] ポーション
  - [x] 武器
  - [x] アクセサリー
  - [x] 魔法書
  - [x] 宝石
- [x] アイテムのコンポーネント実装
  - [x] PriceComponent
  - [x] InventoryComponent
  - [x] DurabilityComponent

### 市場システム ✅ 基本実装完了
- [x] PricingEngineの実装（TDD完了）
- [x] 価格変動アルゴリズムの実装
- [x] 需給バランス計算ロジック
- [x] 季節による価格修正システム
- [x] MarketStateの管理

### 在庫管理システム ✅ 実装完了
- [x] InventoryManagerの実装
- [x] 店頭在庫と倉庫在庫の分離管理
- [x] 在庫配置最適化ロジック
- [x] 売却戦略システム（SellStrategy）

## フェーズ3: ゲームロジック実装（Week 13-20）

### 取引システム ✅ 実装完了
- [x] 仕入れシステムの実装
- [x] 販売システムの実装
  - [x] 店頭販売ロジック
  - [x] 相場取引ロジック
- [x] 取引履歴の記録システム
- [x] 価格交渉システム
- [x] 大量購入割引システム
- [x] 利益計算・マージン追跡
- [x] 顧客評判システム
- [x] 期間限定特別取引

### イベントシステム
- [ ] 定期イベントの実装
  - [ ] 給料日イベント
  - [ ] ギルド定例会イベント
- [ ] 季節イベントの実装
- [ ] 大型イベントの実装
  - [ ] ドラゴン討伐イベント
  - [ ] 収穫祭イベント
- [ ] イベント予告システム

### AI商人システム
- [ ] AIBehaviorインターフェースの実装
- [ ] MerchantPersonalityの定義
- [ ] AI商人の行動パターン実装
- [ ] 市場への影響計算

### プレイヤー進行システム
- [ ] ランクシステムの実装（見習い→マスター）
- [ ] 実績システムの基礎実装
- [ ] 機能解放システム

## フェーズ4: UI/UX実装（Week 21-28）

### Godot UI基本
- [ ] メイン画面の実装
- [ ] UIパネル基底クラスの作成
- [ ] 画面遷移システム

### ゲーム画面
- [ ] 店内ビューの実装
- [ ] 在庫管理画面
- [ ] 市場相場画面
- [ ] 商人手帳（取引履歴）画面

### 情報表示
- [ ] 価格チャートの実装
- [ ] 在庫状況のビジュアル表示
- [ ] イベント予告表示
- [ ] デイリーサマリー表示

### インタラクション
- [ ] 商品購入UI
- [ ] 在庫配置UI
- [ ] 価格設定UI
- [ ] セーブ/ロードUI

## フェーズ5: データ永続化（Week 29-32）

### セーブシステム
- [ ] Protocol Buffersスキーマ定義
- [ ] セーブデータの暗号化
- [ ] オートセーブ機能
- [ ] 複数スロット管理
- [ ] セーブデータ検証システム

### 設定管理
- [ ] ゲーム設定の保存
- [ ] グラフィック設定
- [ ] サウンド設定
- [ ] 言語設定

## フェーズ6: 高度な機能（Week 33-40）

### 投資システム
- [ ] 商人銀行システム
  - [ ] 預金機能
  - [ ] 複利計算
- [ ] 店舗投資システム
  - [ ] 店舗拡張
  - [ ] 設備投資
- [ ] 他商人への出資システム
  - [ ] 配当システム

### チュートリアル
- [ ] チュートリアルシステムの実装
- [ ] 段階的なガイド機能
- [ ] ヒントシステム
- [ ] NPCアンナによるアドバイス機能

### バランス調整
- [ ] 価格バランスの調整
- [ ] 難易度カーブの調整
- [ ] イベント頻度の調整
- [ ] AI商人の強さ調整

## フェーズ7: 最適化とポリッシュ（Week 41-48）

### パフォーマンス最適化
- [ ] 並行処理の実装
- [ ] オブジェクトプーリングの実装
- [ ] メモリ使用量の最適化
- [ ] レンダリング最適化

### 品質保証
- [ ] ユニットテストの作成
- [ ] 統合テストの作成
- [ ] パフォーマンステスト
- [ ] 負荷テスト
- [ ] バグ修正

### ローカライゼーション
- [ ] 日本語対応
- [ ] 英語対応
- [ ] 文字列の外部化
- [ ] フォント対応

## フェーズ8: リリース準備（Week 49-52）

### プラットフォーム対応
- [ ] Windows版ビルド
- [ ] Mac版ビルド
- [ ] Linux版ビルド
- [ ] Steam SDK統合

### マーケティング準備
- [ ] スクリーンショット作成
- [ ] トレーラー動画作成
- [ ] Steamページ作成
- [ ] プレスキット準備

### 最終調整
- [ ] 最終バグ修正
- [ ] Day 1パッチ準備
- [ ] リリースノート作成
- [ ] サポート体制構築

## MVP実装（優先度: 最高）

### MVP必須機能
- [ ] 基本的な売買システム
- [ ] 3種類の商品実装（くだもの、ポーション、武器）
- [ ] 簡易的な相場変動
- [ ] 最低限のUI
- [ ] 基本的なチュートリアル
- [ ] セーブ/ロード機能

## 技術的タスク

### ビルドシステム
- [ ] Makefile作成
- [ ] ビルドスクリプト作成
- [ ] クロスコンパイル設定

### ドキュメント
- [ ] API仕様書作成
- [ ] 開発者ガイド作成
- [ ] ユーザーマニュアル作成

### テスト自動化
- [ ] テストフレームワーク設定
- [ ] CI/CDパイプライン構築
- [ ] カバレッジ測定設定

## リスク対応タスク

### 技術的リスク
- [ ] GDExtension統合の検証
- [ ] パフォーマンス問題の早期発見
- [ ] メモリリーク対策

### ゲームデザインリスク
- [ ] プレイテストの実施
- [ ] バランス調整の反復
- [ ] ユーザーフィードバック収集

## 進捗管理

### マイルストーン
- [ ] Week 12: プロトタイプ完成
- [ ] Week 24: アルファ版完成
- [ ] Week 36: ベータ版完成
- [ ] Week 48: RC版完成
- [ ] Week 52: 正式リリース

### 週次タスク
- [ ] 進捗レポート作成
- [ ] コードレビュー
- [ ] テスト実行
- [ ] ビルド検証

## クリエイティブ制作の並行作業

### アセット制作スケジュール
- **Week 1-8**: コンセプトアート・キャラデザイン確定
- **Week 5-12**: 背景・UI素材制作
- **Week 8-16**: 音楽・効果音制作
- **Week 10-20**: アニメーション制作
- **Week 15-25**: ポリッシュ・追加素材

### 外注検討項目
- [ ] キャラクターイラスト（プロイラストレーター）
- [ ] BGM制作（作曲家）
- [ ] 効果音制作（サウンドデザイナー）
- [ ] 3Dモデル（必要に応じて）

### アセット管理
- [ ] アセット命名規則の策定
- [ ] バージョン管理システムの構築
- [ ] アセットパイプラインの確立
- [ ] 品質チェックリストの作成

## 優先度凡例
- 🔴 最優先（MVP必須）
- 🟡 高優先度（初期リリース必須）
- 🟢 中優先度（できれば初期リリース）
- 🔵 低優先度（アップデートで対応可）

## 備考
- 各タスクの詳細な技術仕様はDesign Docを参照
- 進捗に応じて優先度とスケジュールは調整する
- MVPを最優先で実装し、早期のフィードバック収集を目指す